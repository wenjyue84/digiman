<div class="mb-4">
      <h2 class="text-lg font-semibold text-neutral-800">Static Messages</h2>
      <p class="text-sm text-neutral-500">Pre-written messages including intent replies (user-triggered) and system notifications (auto-triggered by events like errors, rate limits, etc.).</p>
    </div>

    <!-- Search and Filter Bar -->
    <div class="mb-4 space-y-3">
      <!-- Search Box -->
      <div class="relative">
        <input
          type="text"
          id="static-search-input"
          placeholder="Search messages by intent, key, or content..."
          class="w-full border rounded-2xl px-4 py-2.5 pl-10 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"
          oninput="filterStaticReplies()"
        />
        <svg class="absolute left-3 top-3 w-4 h-4 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
      </div>

      <!-- Category Filter -->
      <div class="flex flex-wrap gap-2">
        <button onclick="filterStaticCategory('all')" data-category="all" class="static-category-btn text-xs px-3 py-1.5 rounded-full border bg-primary-500 text-white border-primary-500 transition">
          All
        </button>
        <button onclick="filterStaticCategory('information')" data-category="information" class="static-category-btn text-xs px-3 py-1.5 rounded-full border border-neutral-300 hover:bg-neutral-50 transition">
          ğŸ“š Information
        </button>
        <button onclick="filterStaticCategory('booking')" data-category="booking" class="static-category-btn text-xs px-3 py-1.5 rounded-full border border-neutral-300 hover:bg-neutral-50 transition">
          ğŸ“… Booking
        </button>
        <button onclick="filterStaticCategory('facilities')" data-category="facilities" class="static-category-btn text-xs px-3 py-1.5 rounded-full border border-neutral-300 hover:bg-neutral-50 transition">
          ğŸ  Facilities
        </button>
        <button onclick="filterStaticCategory('payment')" data-category="payment" class="static-category-btn text-xs px-3 py-1.5 rounded-full border border-neutral-300 hover:bg-neutral-50 transition">
          ğŸ’³ Payment
        </button>
        <button onclick="filterStaticCategory('system')" data-category="system" class="static-category-btn text-xs px-3 py-1.5 rounded-full border border-neutral-300 hover:bg-neutral-50 transition">
          âš™ï¸ System
        </button>
      </div>
    </div>

    <!-- Validation Warnings -->
    <div id="static-warnings" class="mb-4 space-y-2"></div>

    <!-- Intent Replies (from knowledge.json) -->
    <div class="mb-6">
      <div class="flex items-center justify-between mb-3">
        <div class="flex items-center gap-2 group">
          <h3 class="font-semibold text-neutral-700">Intent Replies</h3>
          <span class="badge-info">knowledge.json</span>
          <div class="relative inline-block">
            <svg class="w-4 h-4 text-neutral-400 cursor-help" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path>
            </svg>
            <div class="absolute left-6 top-0 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-50 w-72 bg-neutral-900 text-white text-xs rounded-lg p-3 shadow-lg">
              <div class="font-semibold mb-1">Intent Replies</div>
              <p>Pre-written responses triggered when Rainbow detects a specific user intent (like "breakfast_info", "check_in_time"). These are fast, consistent answers that don't require AI processing. Used when an intent is routed to "Static Reply" action.</p>
            </div>
          </div>
        </div>
        <button onclick="showAddKnowledge('static')" class="text-sm bg-success-500 hover:bg-success-600 text-white px-3 py-1.5 rounded-2xl transition">+ Add Reply</button>
      </div>
      <div id="static-intent-replies" class="space-y-3"></div>
    </div>

    <!-- System Messages (from templates.json) -->
    <div>
      <div class="flex items-center justify-between mb-3">
        <div class="flex items-center gap-2 group">
          <h3 class="font-semibold text-neutral-700">System Messages</h3>
          <span class="badge-info">templates.json</span>
          <div class="relative inline-block">
            <svg class="w-4 h-4 text-neutral-400 cursor-help" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path>
            </svg>
            <div class="absolute left-6 top-0 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-50 w-72 bg-neutral-900 text-white text-xs rounded-lg p-3 shadow-lg">
              <div class="font-semibold mb-1">System Messages</div>
              <p>Automated messages sent by the system for operational events (errors, rate limits, maintenance notices, etc.). These are templates used internally by Rainbow, not triggered by user intents. Examples: error_general, rate_limit, out_of_office.</p>
            </div>
          </div>
        </div>
        <button onclick="showAddTemplate()" class="text-sm bg-success-500 hover:bg-success-600 text-white px-3 py-1.5 rounded-2xl transition">+ Add Template</button>
      </div>
      <div id="static-templates" class="space-y-3"></div>
    </div>

    <!-- Add Knowledge Modal -->
    <div id="add-knowledge-modal" class="hidden fixed inset-0 bg-black/40 flex items-center justify-center z-40">
      <div class="bg-white rounded-2xl shadow-strong p-6 w-full max-w-lg mx-4">
        <h3 class="text-lg font-semibold mb-4">Add Intent Reply</h3>
        <form onsubmit="submitAddKnowledge(event)">
          <div class="mb-3">
            <label class="block text-sm font-medium text-neutral-700 mb-1">Intent</label>
            <input id="add-k-intent" class="w-full border rounded-2xl px-3 py-2 text-sm" required placeholder="e.g. breakfast_info" />
          </div>
          <div class="mb-3">
            <label class="block text-sm font-medium text-neutral-700 mb-1">Response (EN) *</label>
            <textarea id="add-k-en" rows="3" class="w-full border rounded-2xl px-3 py-2 text-sm" required></textarea>
          </div>
          <div class="mb-3">
            <label class="block text-sm font-medium text-neutral-700 mb-1">Response (MS)</label>
            <textarea id="add-k-ms" rows="2" class="w-full border rounded-2xl px-3 py-2 text-sm"></textarea>
          </div>
          <div class="mb-3">
            <label class="block text-sm font-medium text-neutral-700 mb-1">Response (ZH)</label>
            <textarea id="add-k-zh" rows="2" class="w-full border rounded-2xl px-3 py-2 text-sm"></textarea>
          </div>
          <div class="flex justify-end gap-2">
            <button type="button" onclick="closeModal('add-knowledge-modal')" class="px-3 py-1.5 text-sm text-neutral-600 border rounded-2xl hover:bg-neutral-50">Cancel</button>
            <button type="submit" class="px-3 py-1.5 text-sm bg-primary-500 text-white rounded-2xl hover:bg-primary-600">Save</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Add Template Modal -->
    <div id="add-template-modal" class="hidden fixed inset-0 bg-black/40 flex items-center justify-center z-40">
      <div class="bg-white rounded-2xl shadow-strong p-6 w-full max-w-lg mx-4">
        <h3 class="text-lg font-semibold mb-4">Add System Message</h3>
        <form onsubmit="submitAddTemplate(event)">
          <div class="mb-3">
            <label class="block text-sm font-medium text-neutral-700 mb-1">Key</label>
            <input id="add-t-key" class="w-full border rounded-2xl px-3 py-2 text-sm" required placeholder="e.g. welcome_back" />
          </div>
          <div class="mb-3">
            <label class="block text-sm font-medium text-neutral-700 mb-1">English *</label>
            <textarea id="add-t-en" rows="2" class="w-full border rounded-2xl px-3 py-2 text-sm" required></textarea>
          </div>
          <div class="mb-3">
            <label class="block text-sm font-medium text-neutral-700 mb-1">Malay</label>
            <textarea id="add-t-ms" rows="2" class="w-full border rounded-2xl px-3 py-2 text-sm"></textarea>
          </div>
          <div class="mb-3">
            <label class="block text-sm font-medium text-neutral-700 mb-1">Chinese</label>
            <textarea id="add-t-zh" rows="2" class="w-full border rounded-2xl px-3 py-2 text-sm"></textarea>
          </div>
          <div class="flex justify-end gap-2">
            <button type="button" onclick="closeModal('add-template-modal')" class="px-3 py-1.5 text-sm text-neutral-600 border rounded-2xl hover:bg-neutral-50">Cancel</button>
            <button type="submit" class="px-3 py-1.5 text-sm bg-primary-500 text-white rounded-2xl hover:bg-primary-600">Save</button>
          </div>
        </form>
      </div>
    </div>
