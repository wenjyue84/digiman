
> pelangi-mcp-server@1.0.0 dev
> tsx watch src/index.ts

[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:37432) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (2999ms)
[Feedback] âœ… Settings loaded from database
12:51:09 am [tsx] unlink in ./..\node_modules\drizzle-orm\column.js Restarting...
c12:51:09 am [tsx] unlink in ./..\node_modules\drizzle-orm\expressions.js Restarting...
c12:51:09 am [tsx] unlink in ./..\node_modules\drizzle-orm\selection-proxy.js Restarting...
c12:51:10 am [tsx] unlink in ./..\node_modules\drizzle-orm\pg-core\dialect.js Restarting...
c12:51:10 am [tsx] unlink in ./..\node_modules\drizzle-orm\pg-core\primary-keys.js Restarting...
c12:51:10 am [tsx] unlink in ./..\node_modules\drizzle-orm\sql\sql.js Restarting...
c12:51:11 am [tsx] unlink in ./..\node_modules\drizzle-orm\pg-core\columns\cidr.js Restarting...
c12:51:11 am [tsx] unlink in ./..\node_modules\drizzle-orm\pg-core\columns\varchar.js Restarting...
c
node:internal/modules/run_main:107
    triggerUncaughtException(
    ^
Error: Cannot find package 'C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\node_modules\drizzle-orm\index.js' imported from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\shared\schema-tables.ts
    at legacyMainResolve (node:internal/modules/esm/resolve:204:26)
    at packageResolve (node:internal/modules/esm/resolve:778:12)
    at moduleResolve (node:internal/modules/esm/resolve:858:18)
    at defaultResolve (node:internal/modules/esm/resolve:990:11)
    at nextResolve (node:internal/modules/esm/hooks:748:28)
    at resolveBase (file:///C:/Users/Jyue/Desktop/Projects/PelangiManager-Zeabur/RainbowAI/node_modules/tsx/dist/esm/index.mjs?1771087871976:2:3744)
    at resolveDirectory (file:///C:/Users/Jyue/Desktop/Projects/PelangiManager-Zeabur/RainbowAI/node_modules/tsx/dist/esm/index.mjs?1771087871976:2:4243)
    at resolveTsPaths (file:///C:/Users/Jyue/Desktop/Projects/PelangiManager-Zeabur/RainbowAI/node_modules/tsx/dist/esm/index.mjs?1771087871976:2:4984)
    at resolve (file:///C:/Users/Jyue/Desktop/Projects/PelangiManager-Zeabur/RainbowAI/node_modules/tsx/dist/esm/index.mjs?1771087871976:2:5361)
    at nextResolve (node:internal/modules/esm/hooks:748:28) {
  code: 'ERR_MODULE_NOT_FOUND'
}

Node.js v24.7.0
12:51:20 am [tsx] change in ./..\node_modules\drizzle-orm\query-builders\query-builder.js Rerunning...
c12:51:20 am [tsx] change in ./..\node_modules\drizzle-orm\sql\functions\vector.js Restarting...
c12:51:21 am [tsx] change in ./..\node_modules\drizzle-orm\pg-core\columns\vector_extension\vector.js Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:7984) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (3705ms)
[Feedback] âœ… Settings loaded from database
12:55:06 am [tsx] change in ./src\assistant\intents.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:22040) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (3751ms)
[Feedback] âœ… Settings loaded from database
