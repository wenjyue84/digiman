    <!-- Header -->
    <div class="mb-8">
      <div class="flex items-center gap-3 mb-3">
        <span class="text-3xl">â“</span>
        <h2 class="text-2xl font-bold text-neutral-800">Rainbow AI Assistant Guide</h2>
      </div>
      <p class="text-neutral-600">Comprehensive guide to setting up and managing your AI-powered WhatsApp chatbot</p>
    </div>

    <!-- Phase 5 What's New (US-018) -->
    <div class="bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-2xl p-5 mb-6">
      <div class="flex items-center gap-2 mb-3">
        <span class="text-xl">âœ¨</span>
        <h3 class="font-semibold text-indigo-900">Phase 5 â€” What's New (Feb 2026)</h3>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-indigo-800">
        <div class="space-y-2">
          <div class="flex items-start gap-2"><span class="text-indigo-400 flex-shrink-0">â€¢</span><span><strong>ğŸ”¬ KB Accuracy Tester</strong> moved to top of Knowledge Base tab with detailed token breakdown (prompt + completion tokens)</span></div>
          <div class="flex items-start gap-2"><span class="text-indigo-400 flex-shrink-0">â€¢</span><span><strong>ğŸ¤– AI Model Settings consolidated</strong> â€” OCR model for passport/IC extraction added at Settings â†’ AI Models</span></div>
          <div class="flex items-start gap-2"><span class="text-indigo-400 flex-shrink-0">â€¢</span><span><strong>ğŸ¨ Capsule Conflict workflow</strong> â€” Rainbow now guides guests and notifies staff when someone occupies their capsule</span></div>
          <div class="flex items-start gap-2"><span class="text-indigo-400 flex-shrink-0">â€¢</span><span><strong>ğŸ·ï¸ Tags &amp; Unit filters fixed</strong> â€” Live Chat filters now load data correctly before showing dropdown</span></div>
        </div>
        <div class="space-y-2">
          <div class="flex items-start gap-2"><span class="text-indigo-400 flex-shrink-0">â€¢</span><span><strong>ğŸ‘¤ Staff name</strong> moved into the â‹® menu in Live Chat header (cleaner layout)</span></div>
          <div class="flex items-start gap-2"><span class="text-indigo-400 flex-shrink-0">â€¢</span><span><strong>ğŸ§ª Check-in Process test suite</strong> added to "Run All" â€” 12 edge cases from easy (Malay/Chinese) to hard (walk-in, capsule conflict)</span></div>
          <div class="flex items-start gap-2"><span class="text-indigo-400 flex-shrink-0">â€¢</span><span><strong>ğŸ”„ Multi-turn workflow tests</strong> now use full conversation state (not single-turn approximation)</span></div>
          <div class="flex items-start gap-2"><span class="text-indigo-400 flex-shrink-0">â€¢</span><span><strong>ğŸ“Š Programmatic test runner</strong> at POST /api/rainbow/testing/run-all â€” auto-generates user stories from failures</span></div>
        </div>
      </div>
    </div>

    <!-- Table of Contents -->
    <div class="bg-gradient-primary rounded-2xl border p-6 mb-6">
      <h3 class="font-semibold text-neutral-800 mb-3">ğŸ“š Quick Navigation</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm">
        <a href="#" class="help-nav-link text-primary-600 hover:text-primary-700 hover:underline"
          data-scroll-to="help-getting-started">â†’ Getting Started</a>
        <a href="#" class="help-nav-link text-primary-600 hover:text-primary-700 hover:underline"
          data-scroll-to="help-whatsapp">â†’ WhatsApp Setup</a>
        <a href="#" class="help-nav-link text-primary-600 hover:text-primary-700 hover:underline"
          data-scroll-to="help-chat-simulator">â†’ Chat Simulator</a>
        <a href="#" class="help-nav-link text-primary-600 hover:text-primary-700 hover:underline"
          data-scroll-to="help-intents">â†’ 4-Tier Intent System</a>
        <a href="#" class="help-nav-link text-primary-600 hover:text-primary-700 hover:underline"
          data-scroll-to="help-intent-manager">â†’ Intent Manager Guide</a>
        <a href="#" class="help-nav-link text-primary-600 hover:text-primary-700 hover:underline"
          data-scroll-to="help-workflow">â†’ Workflow Editor</a>
        <a href="#" class="help-nav-link text-primary-600 hover:text-primary-700 hover:underline"
          data-scroll-to="help-live-chat">â†’ Live Chat</a>
        <a href="#" class="help-nav-link text-primary-600 hover:text-primary-700 hover:underline"
          data-scroll-to="help-kb">â†’ Knowledge Base</a>
        <a href="#" class="help-nav-link text-primary-600 hover:text-primary-700 hover:underline"
          data-scroll-to="help-ai-providers">â†’ AI Models</a>
        <a href="#" class="help-nav-link text-primary-600 hover:text-primary-700 hover:underline"
          data-scroll-to="help-troubleshooting">â†’ Troubleshooting</a>
      </div>
    </div>

    <!-- Getting Started -->
    <div id="help-getting-started" class="bg-white rounded-2xl border p-6 mb-6">
      <div class="flex items-center gap-2 mb-4">
        <span class="text-2xl">ğŸš€</span>
        <h3 class="text-xl font-semibold text-neutral-800">Getting Started</h3>
      </div>
      <div class="space-y-4 text-sm text-neutral-700">
        <p class="leading-relaxed">
          <strong>Rainbow</strong> is your AI-powered WhatsApp assistant that handles guest inquiries, provides
          information,
          and automates conversations 24/7. It combines intent detection, knowledge base search, and AI responses to
          create
          natural, helpful interactions.
        </p>
        <div class="bg-gradient-success rounded-xl p-4 border border-success-200">
          <p class="font-semibold text-success-800 mb-2">âœ… What Rainbow Can Do:</p>
          <ul class="space-y-1 ml-4 text-success-700">
            <li>â€¢ Answer guest questions automatically via WhatsApp</li>
            <li>â€¢ Detect user intent and route to appropriate responses</li>
            <li>â€¢ Search knowledge base for accurate information</li>
            <li>â€¢ Handle bookings and checkout workflows</li>
            <li>â€¢ Support multiple languages (English, Malay, Chinese)</li>
            <li>â€¢ Escalate complex issues to staff when needed</li>
            <li>â€¢ Learn from new keywords and examples you add</li>
          </ul>
        </div>

        <!-- Dashboard Screenshot -->
        <div class="rounded-xl overflow-hidden border border-neutral-200 shadow-soft">
          <img src="/public/images/help/dashboard.png" alt="Rainbow AI Dashboard" class="w-full" loading="lazy">
          <div class="bg-neutral-50 px-3 py-1.5 text-xs text-neutral-500 text-center">Rainbow AI Dashboard â€” system status, occupancy, and quick actions</div>
        </div>

        <div class="bg-neutral-50 rounded-xl p-4 border">
          <p class="font-semibold text-neutral-800 mb-2">ğŸ—‚ï¸ Dashboard Overview:</p>
          <div class="space-y-2 text-xs">
            <p class="text-neutral-600 mb-2">The Rainbow dashboard has four main sections in the navigation:</p>
            <div class="space-y-1.5">
              <div><strong>ğŸ“± Connect:</strong> WhatsApp setup and connection status</div>
              <div><strong>ğŸ§  Train:</strong> Configure how Rainbow understands messages and responds</div>
              <div class="ml-4 text-neutral-600">
                â€¢ Understanding - Intent classification system<br>
                â€¢ Responses - Knowledge base and workflows
              </div>
              <div><strong>ğŸ§ª Test:</strong> Test Rainbow before deploying changes</div>
              <div class="ml-4 text-neutral-600">
                â€¢ Chat Simulator - Test responses in a safe environment<br>
                â€¢ Staff Review - Review and validate AI classifications
              </div>
              <div><strong>ğŸ’¬ Conversations:</strong> View and manage guest conversations</div>
              <div class="ml-4 text-neutral-600">
                â€¢ Live Chat - See all WhatsApp conversations and reply to guests
              </div>
              <div><strong>ğŸ“Š Monitor:</strong> View analytics and configure settings</div>
              <div class="ml-4 text-neutral-600">
                â€¢ Dashboard - System status and metrics<br>
                â€¢ Settings - AI models, notifications, and system config
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- WhatsApp Setup -->
    <div id="help-whatsapp" class="bg-white rounded-2xl border p-6 mb-6">
      <div class="flex items-center gap-2 mb-4">
        <span class="text-2xl">ğŸ“±</span>
        <h3 class="text-xl font-semibold text-neutral-800">WhatsApp Instance Setup</h3>
      </div>
      <div class="space-y-4 text-sm text-neutral-700">
        <div class="space-y-3">
          <div class="flex items-start gap-3">
            <div
              class="flex-shrink-0 flex items-center justify-center w-6 h-6 rounded-full bg-primary-100 text-primary-700 font-bold text-xs">
              1</div>
            <div>
              <p class="font-semibold text-neutral-800 mb-1">Go to WhatsApp Accounts</p>
              <p class="text-neutral-600">Click <strong>ğŸ“± Connect</strong> â†’ <strong>ğŸ“± WhatsApp Accounts</strong> to
                see your WhatsApp instances</p>
            </div>
          </div>
          <div class="flex items-start gap-3">
            <div
              class="flex-shrink-0 flex items-center justify-center w-6 h-6 rounded-full bg-primary-100 text-primary-700 font-bold text-xs">
              2</div>
            <div>
              <p class="font-semibold text-neutral-800 mb-1">Add WhatsApp Number</p>
              <p class="text-neutral-600">Click "+ Add Number" and enter your Malaysian phone number (e.g., <code
                  class="bg-neutral-100 px-1 rounded">167052004</code> for 016-705 2004)</p>
            </div>
          </div>
          <div class="flex items-start gap-3">
            <div
              class="flex-shrink-0 flex items-center justify-center w-6 h-6 rounded-full bg-primary-100 text-primary-700 font-bold text-xs">
              3</div>
            <div>
              <p class="font-semibold text-neutral-800 mb-1">Scan QR Code</p>
              <p class="text-neutral-600">Open WhatsApp on your phone â†’ Settings â†’ Linked Devices â†’ Link a Device â†’ Scan
                the QR code</p>
            </div>
          </div>
          <div class="flex items-start gap-3">
            <div
              class="flex-shrink-0 flex items-center justify-center w-6 h-6 rounded-full bg-primary-100 text-primary-700 font-bold text-xs">
              4</div>
            <div>
              <p class="font-semibold text-neutral-800 mb-1">Verify Connection</p>
              <p class="text-neutral-600">Once connected, status will show <span
                  class="inline-flex items-center gap-1"><span class="status-dot status-online"></span>Connected</span>
              </p>
            </div>
          </div>
        </div>

        <div class="bg-gradient-warning rounded-xl p-4 border border-warning-200 mt-4">
          <p class="font-semibold text-warning-800 mb-2">âš ï¸ Important Notes:</p>
          <ul class="space-y-1 ml-4 text-warning-700 text-xs">
            <li>â€¢ Your phone must stay online (with internet) for the bot to work</li>
            <li>â€¢ QR codes expire after 60 seconds - refresh if needed</li>
            <li>â€¢ You can connect multiple WhatsApp numbers for different locations</li>
            <li>â€¢ Each instance can handle multiple simultaneous conversations</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Chat Simulator -->
    <div id="help-chat-simulator" class="bg-white rounded-2xl border p-6 mb-6">
      <div class="flex items-center gap-2 mb-4">
        <span class="text-2xl">ğŸ’¬</span>
        <h3 class="text-xl font-semibold text-neutral-800">Chat Simulator</h3>
      </div>
      <div class="space-y-4 text-sm text-neutral-700">
        <p class="leading-relaxed">
          The Chat Simulator lets you test how Rainbow responds to messages before deploying changes. Use it to verify intent classification, test workflows, and check AI responses without sending actual WhatsApp messages.
        </p>

        <!-- Chat Simulator Screenshot -->
        <div class="rounded-xl overflow-hidden border border-neutral-200 shadow-soft">
          <img src="/public/images/help/chat-simulator.png" alt="Chat Simulator" class="w-full" loading="lazy">
          <div class="bg-neutral-50 px-3 py-1.5 text-xs text-neutral-500 text-center">Chat Simulator â€” test messages and see intent classification results</div>
        </div>

        <div class="bg-neutral-50 rounded-xl p-4 border">
          <p class="font-semibold text-neutral-800 mb-2">ğŸ¯ How to Use:</p>
          <ol class="space-y-2 ml-4 text-neutral-700">
            <li><strong>1. Access:</strong> Click <strong>ğŸ§ª Test</strong> â†’ <strong>ğŸ’¬ Chat Simulator</strong> in the navigation menu</li>
            <li><strong>2. Type a message:</strong> Enter a test message like "What's the WiFi password?"</li>
            <li><strong>3. Send:</strong> Click <strong>Send</strong> or press Enter</li>
            <li><strong>4. Review results:</strong> See Rainbow's response and classification details</li>
          </ol>
        </div>

        <div class="bg-gradient-primary rounded-xl p-4 border border-primary-200">
          <p class="font-semibold text-primary-800 mb-2">ğŸ“Š Understanding Test Results:</p>
          <div class="space-y-2 text-primary-700 text-xs">
            <p><strong>Intent:</strong> Shows which intent Rainbow detected (e.g., "wifi_inquiry", "greeting")</p>
            <p><strong>Confidence:</strong> How certain Rainbow is about the classification (0-100%)</p>
            <p><strong>Tier:</strong> Which tier matched the message:</p>
            <ul class="ml-4 mt-1 space-y-1">
              <li>â€¢ <strong>T1 (Regex):</strong> Emergency pattern matched (~0.1ms)</li>
              <li>â€¢ <strong>T2 (Fuzzy):</strong> Keyword matched (~1ms)</li>
              <li>â€¢ <strong>T3 (Semantic):</strong> Training example matched (~50ms)</li>
              <li>â€¢ <strong>T4 (LLM):</strong> AI classification fallback (~100-500ms)</li>
            </ul>
            <p class="mt-2"><strong>Token Usage:</strong> Shows how many tokens the AI used (displayed in metadata section)</p>
            <p><strong>Response Time:</strong> How long Rainbow took to generate the response</p>
          </div>
        </div>

        <div class="bg-gradient-success rounded-xl p-4 border border-success-200">
          <p class="font-semibold text-success-800 mb-2">ğŸ§ª Testing Workflows:</p>
          <div class="space-y-2 text-success-700 text-xs">
            <p>You can simulate multi-step workflows (like booking or checkout) in the Chat Simulator:</p>
            <ol class="ml-4 space-y-1">
              <li>1. Trigger a workflow by sending a message that matches the intent</li>
              <li>2. Rainbow will send the first step message and wait for your reply</li>
              <li>3. Continue responding to simulate a real conversation</li>
              <li>4. See how the workflow progresses through each step</li>
            </ol>
          </div>
        </div>

        <div class="bg-gradient-warning rounded-xl p-4 border border-warning-200">
          <p class="font-semibold text-warning-800 mb-2">ğŸ’¡ Pro Tips:</p>
          <ul class="space-y-1 ml-4 text-warning-700 text-xs">
            <li>â€¢ Test after every change to intents, keywords, or examples</li>
            <li>â€¢ Try different phrasings to see if Rainbow understands variations</li>
            <li>â€¢ Check token usage to monitor AI costs</li>
            <li>â€¢ Use the simulator to find misclassified messages and improve training data</li>
            <li>â€¢ Test in different languages (English, Malay, Chinese) to verify multilingual support</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Intent Detection -->
    <div id="help-intents" class="bg-white rounded-2xl border p-6 mb-6">
      <div class="flex items-center gap-2 mb-4">
        <span class="text-2xl">ğŸ¯</span>
        <h3 class="text-xl font-semibold text-neutral-800">Intent Detection & Routing</h3>
      </div>
      <div class="space-y-4 text-sm text-neutral-700">
        <p class="leading-relaxed">
          Intent detection helps Rainbow understand <strong>what the user wants</strong> by analyzing their message
          and matching it to predefined categories (intents). This allows the bot to provide accurate, contextual
          responses.
        </p>

        <!-- Understanding Screenshot -->
        <div class="rounded-xl overflow-hidden border border-neutral-200 shadow-soft">
          <img src="/public/images/help/understanding.png" alt="Understanding Tab â€” Intent Classification" class="w-full" loading="lazy">
          <div class="bg-neutral-50 px-3 py-1.5 text-xs text-neutral-500 text-center">Understanding tab â€” configure the 4-tier intent classification system</div>
        </div>

        <div class="bg-neutral-50 rounded-xl p-4 border">
          <p class="font-semibold text-neutral-800 mb-2">ğŸ§  How It Works:</p>
          <ol class="space-y-2 ml-4 text-neutral-700">
            <li><strong>1. User sends message:</strong> "What's the WiFi password?"</li>
            <li><strong>2. Intent detection:</strong> Detects intent = <code
                class="bg-primary-100 text-primary-700 px-1.5 py-0.5 rounded text-xs">wifi_inquiry</code></li>
            <li><strong>3. Routing:</strong> Routes to WiFi information response</li>
            <li><strong>4. Response:</strong> Sends WiFi credentials to user</li>
          </ol>
        </div>

        <div class="space-y-2 mt-4">
          <p class="font-semibold text-neutral-800">ğŸ“‹ Common Intents:</p>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
            <div class="bg-gradient-primary rounded-lg p-3 border border-primary-200">
              <p class="font-mono text-xs text-primary-700 mb-1">greeting</p>
              <p class="text-xs text-neutral-600">Hello, hi, good morning</p>
            </div>
            <div class="bg-gradient-primary rounded-lg p-3 border border-primary-200">
              <p class="font-mono text-xs text-primary-700 mb-1">wifi_inquiry</p>
              <p class="text-xs text-neutral-600">WiFi password, internet access</p>
            </div>
            <div class="bg-gradient-primary rounded-lg p-3 border border-primary-200">
              <p class="font-mono text-xs text-primary-700 mb-1">booking_inquiry</p>
              <p class="text-xs text-neutral-600">Availability, pricing, booking</p>
            </div>
            <div class="bg-gradient-primary rounded-lg p-3 border border-primary-200">
              <p class="font-mono text-xs text-primary-700 mb-1">checkin_checkout</p>
              <p class="text-xs text-neutral-600">Check-in time, checkout process</p>
            </div>
          </div>
        </div>

        <div class="bg-gradient-success rounded-xl p-4 border border-success-200 mt-4">
          <p class="font-semibold text-success-800 mb-3">ğŸ¯ 4-Tier Intent Classification System:</p>
          <p class="text-success-700 text-xs mb-3">
            Rainbow uses a sophisticated 4-tier system to classify intents, progressing from fastest to most
            intelligent:
          </p>
          <div class="space-y-3">
            <div class="bg-white rounded-lg p-3 border border-success-200">
              <div class="flex items-center gap-2 mb-1">
                <span class="text-danger-600 font-bold">ğŸš¨ T1: Emergency Patterns (Regex)</span>
                <span class="text-xs text-neutral-500">~0.1ms</span>
              </div>
              <p class="text-xs text-neutral-600 ml-5">Instant pattern matching for critical emergencies (fire, theft,
                ambulance). Uses regex for guaranteed detection.</p>
            </div>

            <div class="bg-white rounded-lg p-3 border border-success-200">
              <div class="flex items-center gap-2 mb-1">
                <span class="text-primary-600 font-bold">âš¡ T2: Keywords (Fuzzy Matching)</span>
                <span class="text-xs text-neutral-500">~1ms</span>
              </div>
              <p class="text-xs text-neutral-600 ml-5">Fast keyword matching with typo tolerance. Matches "wifi", "wfi",
                "WiFi" as the same. Best for direct keywords and abbreviations.</p>
            </div>

            <div class="bg-white rounded-lg p-3 border border-success-200">
              <div class="flex items-center gap-2 mb-1">
                <span class="text-success-600 font-bold">ğŸ”¬ T3: Training Examples (Semantic)</span>
                <span class="text-xs text-neutral-500">~50ms</span>
              </div>
              <p class="text-xs text-neutral-600 ml-5">AI-powered meaning-based matching. Understands paraphrases:
                "what's the cost" = "how much" = "tell me the price".</p>
            </div>

            <div class="bg-white rounded-lg p-3 border border-success-200">
              <div class="flex items-center gap-2 mb-1">
                <span class="text-warning-600 font-bold">ğŸ§  T4: LLM Fallback</span>
                <span class="text-xs text-neutral-500">~100-500ms</span>
              </div>
              <p class="text-xs text-neutral-600 ml-5">Full AI classification for complex queries. Used when other tiers
                don't match. Handles edge cases and ambiguous intents.</p>
            </div>
          </div>
        </div>

        <div class="bg-gradient-primary rounded-xl p-4 border border-primary-200 mt-4">
          <p class="font-semibold text-primary-800 mb-2">ğŸ“Š Using the Intent Manager:</p>
          <div class="space-y-2 text-primary-700 text-xs">
            <p><strong>1. Access:</strong> Click <strong>ğŸ§  Train</strong> â†’ <strong>ğŸ§  Understanding</strong> in the
              navigation menu</p>
            <p><strong>2. Collapsible Sections:</strong> Each tier (T1-T4) has a chevron icon. Click it to expand or
              collapse the section.</p>
            <p><strong>3. Test Your Setup:</strong> Use the Test Console at the top to instantly see which tier matches
              your query</p>
            <p><strong>4. Progressive Enhancement:</strong> Start with T2 keywords for common queries, add T3 examples
              for variations, and let T4 handle the rest</p>
          </div>
        </div>

        <div class="bg-gradient-warning rounded-xl p-4 border border-warning-200 mt-4">
          <p class="font-semibold text-warning-800 mb-2">ğŸ’¡ Pro Tips:</p>
          <ul class="space-y-1 ml-4 text-warning-700 text-xs">
            <li>â€¢ <strong>Keep sections collapsed</strong> when not editing to reduce visual clutter</li>
            <li>â€¢ <strong>Add T2 keywords first</strong> for fast matching on common queries</li>
            <li>â€¢ <strong>Use T3 examples</strong> for natural language variations ("how much", "what's the price",
              "cost?")</li>
            <li>â€¢ <strong>Reserve T1 regex</strong> for critical emergencies only - it always matches first!</li>
            <li>â€¢ <strong>Monitor T4 usage</strong> in testing - high T4 usage means you need more keywords/examples
            </li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Intent Manager Guide -->
    <div id="help-intent-manager" class="bg-white rounded-2xl border p-6 mb-6">
      <div class="flex items-center gap-2 mb-4">
        <span class="text-2xl">ğŸ›ï¸</span>
        <h3 class="text-xl font-semibold text-neutral-800">Intent Manager - Step-by-Step Guide</h3>
      </div>
      <div class="space-y-4 text-sm text-neutral-700">
        <p class="leading-relaxed">
          The Intent Manager lets you configure all four tiers of intent classification. Each tier is
          <strong>collapsible</strong>
          to keep the interface clean â€” click the chevron to show
          a tier, and <span class="bg-primary-100 px-1.5 py-0.5 rounded text-xs">â–¼ Collapse</span> to hide it.
        </p>

        <!-- T1 Guide -->
        <div class="bg-gradient-danger rounded-xl p-4 border border-danger-200">
          <p class="font-semibold text-danger-800 mb-2 flex items-center gap-2">
            <span>ğŸš¨ T1: Emergency Regex Patterns</span>
            <span class="text-xs font-normal text-danger-600">(~0.1ms)</span>
          </p>
          <div class="space-y-2 text-danger-700 text-xs">
            <p><strong>When to use:</strong> Critical emergencies that must be detected instantly (fire, theft, medical
              emergency)</p>
            <p><strong>How to add:</strong></p>
            <ol class="ml-4 space-y-1">
              <li>1. Click the <strong>chevron</strong> on the T1 section</li>
              <li>2. Enter regex pattern: <code class="bg-danger-100 px-1">/fire|kebakaran|ç€ç«/i</code></li>
              <li>3. Add description: "Fire emergency"</li>
              <li>4. Click <strong>Add</strong>, then <strong>Save Patterns</strong></li>
              <li>5. Restart server to apply changes</li>
            </ol>
            <div class="bg-white rounded-lg p-2 mt-2 border border-danger-200">
              <p class="font-semibold mb-1">âš ï¸ Regex Flags:</p>
              <ul class="ml-4">
                <li>â€¢ <code class="bg-danger-100 px-1">/pattern/i</code> = case-insensitive</li>
                <li>â€¢ <code class="bg-danger-100 px-1">|</code> = OR operator</li>
                <li>â€¢ <code class="bg-danger-100 px-1">\b</code> = word boundary</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- T2 Guide -->
        <div class="bg-gradient-primary rounded-xl p-4 border border-primary-200">
          <p class="font-semibold text-primary-800 mb-2 flex items-center gap-2">
            <span>âš¡ T2: Keywords (Fuzzy Matching)</span>
            <span class="text-xs font-normal text-primary-600">(~1ms)</span>
          </p>
          <div class="space-y-2 text-primary-700 text-xs">
            <p><strong>When to use:</strong> Direct keywords, abbreviations, common queries with typo tolerance</p>
            <p><strong>How to add:</strong></p>
            <ol class="ml-4 space-y-1">
              <li>1. Click the <strong>chevron</strong> on the T2 section</li>
              <li>2. Select an intent from the left panel (e.g., "wifi")</li>
              <li>3. Switch language tab (English, Malay, Chinese)</li>
              <li>4. Type keyword and press <strong>Enter</strong> or click <strong>Add</strong></li>
              <li>5. Click <strong>Save Keywords</strong> when done</li>
            </ol>
            <div class="bg-white rounded-lg p-2 mt-2 border border-primary-200">
              <p class="font-semibold mb-1">ğŸ’¡ Keyword Tips:</p>
              <ul class="ml-4">
                <li>â€¢ Add abbreviations: "wifi", "wi-fi", "wlan"</li>
                <li>â€¢ Include common misspellings: "pasword", "passowrd"</li>
                <li>â€¢ Add multilingual variants: "wifi" (EN), "kata laluan wifi" (MS), "å¯†ç " (ZH)</li>
                <li>â€¢ Fuzzy matching automatically handles minor typos!</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- T3 Guide -->
        <div class="bg-gradient-success rounded-xl p-4 border border-success-200">
          <p class="font-semibold text-success-800 mb-2 flex items-center gap-2">
            <span>ğŸ”¬ T3: Training Examples (Semantic)</span>
            <span class="text-xs font-normal text-success-600">(~50ms)</span>
          </p>
          <div class="space-y-2 text-success-700 text-xs">
            <p><strong>When to use:</strong> Natural language variations, paraphrases, different ways to ask the same
              thing</p>
            <p><strong>How to add:</strong></p>
            <ol class="ml-4 space-y-1">
              <li>1. Click the <strong>chevron</strong> on the T3 section</li>
              <li>2. Select an intent from the left panel</li>
              <li>3. Type example phrase: "what's the cost?"</li>
              <li>4. Press <strong>Enter</strong> or click <strong>Add</strong></li>
              <li>5. Add more variations: "how much is it?", "tell me the price"</li>
              <li>6. Click <strong>Save Examples</strong></li>
              <li>7. <strong>âš ï¸ Restart server</strong> to reload semantic matcher</li>
            </ol>
            <div class="bg-white rounded-lg p-2 mt-2 border border-success-200">
              <p class="font-semibold mb-1">ğŸ¯ Example Phrases:</p>
              <ul class="ml-4">
                <li>â€¢ Use full sentences: "What's the WiFi password?"</li>
                <li>â€¢ Include questions: "How much does a bed cost?"</li>
                <li>â€¢ Add casual language: "yo what's the wifi lol"</li>
                <li>â€¢ AI understands meaning, not exact words!</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- T4 Guide -->
        <div class="bg-gradient-warning rounded-xl p-4 border border-warning-200">
          <p class="font-semibold text-warning-800 mb-2 flex items-center gap-2">
            <span>ğŸ§  T4: LLM Fallback Settings</span>
            <span class="text-xs font-normal text-warning-600">(~100-500ms)</span>
          </p>
          <div class="space-y-2 text-warning-700 text-xs">
            <p><strong>When to use:</strong> Automatically handles complex queries when T1-T3 don't match</p>
            <p><strong>How to configure:</strong></p>
            <ol class="ml-4 space-y-1">
              <li>1. Click the <strong>chevron</strong> on the T4 section</li>
              <li>2. Set confidence thresholds (default: Fuzzy 80%, Semantic 70%, LLM 60%)</li>
              <li>3. Select AI models and set fallback order</li>
              <li>4. Customize system prompt for intent classification</li>
              <li>5. Configure fallback behavior (unknown intent, logging)</li>
              <li>6. Click <strong>Save LLM Settings</strong></li>
            </ol>
            <div class="bg-white rounded-lg p-2 mt-2 border border-warning-200">
              <p class="font-semibold mb-1">âš™ï¸ Configuration Tips:</p>
              <ul class="ml-4">
                <li>â€¢ Lower thresholds = more matches, but less accurate</li>
                <li>â€¢ Higher thresholds = fewer matches, more fall to T4</li>
                <li>â€¢ Use T4 as safety net for edge cases</li>
                <li>â€¢ Monitor T4 usage - high usage means add more T2/T3 data!</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Testing -->
        <div class="bg-neutral-50 rounded-xl p-4 border mt-4">
          <p class="font-semibold text-neutral-800 mb-2">ğŸ§ª Testing Your Setup:</p>
          <div class="space-y-2 text-neutral-700 text-xs">
            <p>Use the <strong>Test Console</strong> at the top of the Intent Manager to verify your configuration:</p>
            <ol class="ml-4 space-y-1">
              <li>1. Type a test message (e.g., "what's the wifi password?")</li>
              <li>2. Click <strong>Test</strong></li>
              <li>3. See which source matched: ğŸš¨ Priority Keywords, âš¡ Smart Matching, ğŸ“š Learning Examples, or ğŸ¤– AI
                Fallback</li>
              <li>4. View confidence score and matched intent</li>
              <li>5. Adjust keywords/examples if wrong tier is matching</li>
            </ol>
          </div>
        </div>

        <!-- Best Practices -->
        <div class="bg-gradient-success rounded-xl p-4 border border-success-200 mt-4">
          <p class="font-semibold text-success-800 mb-2">âš¡ Quick Add: Adding Keywords and Examples Fast</p>
          <div class="space-y-2 text-success-700 text-xs">
            <p>The <strong>Quick Add</strong> panel lets you quickly add misclassified messages as keywords or examples without navigating through each tier:</p>
            <ol class="ml-4 space-y-1">
              <li>1. Select the <strong>intent</strong> from the dropdown (e.g., "wifi_inquiry")</li>
              <li>2. Select the <strong>language</strong> (English, Malay, or Chinese)</li>
              <li>3. Type or paste the message text</li>
              <li>4. Click <strong>Add as Keyword</strong> (T2 Fuzzy) or <strong>Add as Example</strong> (T3 Semantic)</li>
              <li>5. The system automatically checks for duplicates and adds to the right tier</li>
            </ol>
            <p class="mt-2"><strong>When to use Quick Add:</strong></p>
            <ul class="ml-4 space-y-1">
              <li>â€¢ Found a misclassified message in Chat Simulator or Live Chat</li>
              <li>â€¢ Want to quickly improve classification for a specific phrase</li>
              <li>â€¢ Adding multiple similar phrases in a row</li>
            </ul>
          </div>
        </div>

        <div class="bg-primary-50 rounded-xl p-4 border border-primary-200 mt-4">
          <p class="font-semibold text-primary-800 mb-2">âœ¨ Best Practices:</p>
          <ul class="space-y-1 ml-4 text-primary-700 text-xs">
            <li>â€¢ <strong>Start with T2:</strong> Add common keywords first for fast matching</li>
            <li>â€¢ <strong>Expand to T3:</strong> Add natural language examples for variations</li>
            <li>â€¢ <strong>Reserve T1:</strong> Only for critical emergencies (fire, theft, medical)</li>
            <li>â€¢ <strong>Let T4 learn:</strong> Monitor what T4 catches and add to T2/T3</li>
            <li>â€¢ <strong>Collapse when done:</strong> Keep sections collapsed to reduce clutter</li>
            <li>â€¢ <strong>Test frequently:</strong> Use Test Console after every change</li>
            <li>â€¢ <strong>Multilingual support:</strong> Add keywords in all languages your guests use</li>
            <li>â€¢ <strong>Use Quick Add:</strong> Fastest way to improve classification for misclassified messages</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Knowledge Base -->
    <div id="help-kb" class="bg-white rounded-2xl border p-6 mb-6">
      <div class="flex items-center gap-2 mb-4">
        <span class="text-2xl">ğŸ“š</span>
        <h3 class="text-xl font-semibold text-neutral-800">Knowledge Base Training</h3>
      </div>
      <div class="space-y-4 text-sm text-neutral-700">
        <p class="leading-relaxed">
          The Knowledge Base is where you teach Rainbow about your hostel. Add documents with information
          about facilities, rules, amenities, and local tips. Rainbow will search these documents to answer guest
          questions.
        </p>

        <!-- Responses Screenshot -->
        <div class="rounded-xl overflow-hidden border border-neutral-200 shadow-soft">
          <img src="/public/images/help/responses.png" alt="Knowledge Base / Responses Tab" class="w-full" loading="lazy">
          <div class="bg-neutral-50 px-3 py-1.5 text-xs text-neutral-500 text-center">Responses tab â€” manage knowledge base documents and workflows</div>
        </div>

        <div class="space-y-3 mt-4">
          <div class="bg-gradient-success rounded-xl p-4 border border-success-200">
            <p class="font-semibold text-success-800 mb-2">âœ… What to Add:</p>
            <ul class="space-y-1 ml-4 text-success-700 text-xs">
              <li>â€¢ <strong>Facility Information:</strong> WiFi details, amenities, operating hours</li>
              <li>â€¢ <strong>House Rules:</strong> Quiet hours, smoking policy, visitor rules</li>
              <li>â€¢ <strong>Location & Directions:</strong> How to get there, nearby attractions</li>
              <li>â€¢ <strong>Emergency Contacts:</strong> Reception number, emergency services</li>
              <li>â€¢ <strong>Local Tips:</strong> Restaurants, transport, things to do</li>
              <li>â€¢ <strong>FAQ:</strong> Common questions from guests</li>
            </ul>
          </div>

          <p class="font-semibold text-neutral-800 mt-4">ğŸ“ How to Add Documents:</p>
          <div class="space-y-2">
            <div class="flex items-start gap-3">
              <span class="flex-shrink-0 text-primary-600 font-bold">â†’</span>
              <p>Click <strong>ğŸ§  Train</strong> â†’ <strong>ğŸ“š Responses</strong> to manage knowledge base documents</p>
            </div>
            <div class="flex items-start gap-3">
              <span class="flex-shrink-0 text-primary-600 font-bold">â†’</span>
              <p>Click a document to edit (e.g., <code
                  class="bg-neutral-100 px-1.5 py-0.5 rounded text-xs">soul.md</code> for personality)</p>
            </div>
            <div class="flex items-start gap-3">
              <span class="flex-shrink-0 text-primary-600 font-bold">â†’</span>
              <p>Write content in Markdown format</p>
            </div>
            <div class="flex items-start gap-3">
              <span class="flex-shrink-0 text-primary-600 font-bold">â†’</span>
              <p>Click <strong>Save</strong> to update the knowledge base</p>
            </div>
          </div>
        </div>

        <div class="bg-primary-50 rounded-xl p-4 border border-primary-200 mt-4">
          <p class="font-semibold text-primary-800 mb-2">ğŸ’¡ Best Practices:</p>
          <ul class="space-y-1 ml-4 text-primary-700 text-xs">
            <li>â€¢ Use clear headings (# Heading in Markdown) to organize information</li>
            <li>â€¢ Write in a friendly, conversational tone</li>
            <li>â€¢ Include specific details (times, prices, phone numbers)</li>
            <li>â€¢ Update regularly when information changes</li>
            <li>â€¢ Test responses by clicking <strong>ğŸ§ª Test</strong> â†’ <strong>ğŸ’¬ Chat Simulator</strong></li>
          </ul>
        </div>
      </div>
    </div>

    <!-- AI Models -->
    <div id="help-ai-providers" class="bg-white rounded-2xl border p-6 mb-6 shadow-soft">
      <div class="flex items-center gap-2 mb-4">
        <span class="text-2xl">ğŸ¤–</span>
        <h3 class="text-xl font-semibold text-neutral-800">AI Model Settings</h3>
      </div>
      <div class="space-y-4 text-sm text-neutral-700">
        <p class="leading-relaxed">
          Rainbow can use multiple AI models (e.g. Groq Llama, OpenAI GPT, Google Gemini) to generate intelligent
          responses
          when no pre-written reply is found. Configure these in <strong>ğŸ“Š Monitor</strong> â†’ <strong>âš™ï¸
            Settings</strong> â†’ <strong>ğŸ¤– AI Models</strong>.
        </p>

        <!-- Settings Screenshot -->
        <div class="rounded-xl overflow-hidden border border-neutral-200 shadow-soft">
          <img src="/public/images/help/settings.png" alt="Settings â€” AI Models" class="w-full" loading="lazy">
          <div class="bg-neutral-50 px-3 py-1.5 text-xs text-neutral-500 text-center">Settings tab â€” configure AI models, notifications, and system preferences</div>
        </div>

        <div class="bg-gradient-warning rounded-xl p-4 border border-warning-200">
          <p class="font-semibold text-warning-800 mb-2">âš™ï¸ How to Enable Models:</p>
          <ol class="space-y-1 ml-4 text-warning-700 text-xs">
            <li>1. Go to <strong>ğŸ“Š Monitor</strong> â†’ <strong>âš™ï¸ Settings</strong></li>
            <li>2. Click the <strong>ğŸ¤– AI Models</strong> sub-tab</li>
            <li>3. Toggle the checkbox for models you want to use</li>
            <li>4. Check the status indicator: <span class="text-success-600 font-bold">âœ“ Configured</span> means the
              API key is working.</li>
            <li>5. Test AI responses in <strong>ğŸ§ª Test</strong> â†’ <strong>ğŸ’¬ Chat Simulator</strong></li>
          </ol>
        </div>

        <div class="bg-primary-50 rounded-xl p-4 border border-primary-100 flex gap-2">
          <span class="text-primary-500">â„¹ï¸</span>
          <p class="text-xs text-primary-700"><strong>Note:</strong> Rainbow uses a "Fallback" system. If your primary
            model is busy or fails, it will automatically try the next enabled model in your list.</p>
        </div>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mt-4">
      <div class="border border-primary-200 rounded-xl p-3">
        <p class="font-semibold text-neutral-800 text-xs mb-1">ğŸ”µ OpenAI (GPT-4)</p>
        <p class="text-neutral-600 text-xs">Most popular, high quality, moderate cost</p>
      </div>
      <div class="border border-purple-200 rounded-xl p-3">
        <p class="font-semibold text-neutral-800 text-xs mb-1">ğŸŸ£ Anthropic (Claude)</p>
        <p class="text-neutral-600 text-xs">Excellent for long conversations, safety-focused</p>
      </div>
      <div class="border border-blue-200 rounded-xl p-3">
        <p class="font-semibold text-neutral-800 text-xs mb-1">ğŸ”· Google (Gemini)</p>
        <p class="text-neutral-600 text-xs">Fast, cost-effective, good multilingual support</p>
      </div>
      <div class="border border-green-200 rounded-xl p-3">
        <p class="font-semibold text-neutral-800 text-xs mb-1">ğŸŸ¢ Local Models</p>
        <p class="text-neutral-600 text-xs">Free, private, requires local setup</p>
      </div>
    </div>
  </div>
</div>

<!-- Workflow Editor -->
<div id="help-workflow" class="bg-white rounded-2xl border p-6 mb-6">
  <div class="flex items-center gap-2 mb-4">
    <span class="text-2xl">ğŸ”„</span>
    <h3 class="text-xl font-semibold text-neutral-800">Workflow Editor</h3>
  </div>
  <div class="space-y-4 text-sm text-neutral-700">
    <p class="leading-relaxed">
      Workflows let you create multi-step conversations with guests. For example, a booking workflow can ask for dates, room type, and number of guests before sending a confirmation. Rainbow supports two formats: <strong>Steps</strong> (simple linear flow) and <strong>Nodes</strong> (advanced branching logic).
    </p>

    <!-- Smart Routing Screenshot -->
    <div class="rounded-xl overflow-hidden border border-neutral-200 shadow-soft">
      <img src="/public/images/help/smart-routing.png" alt="Smart Routing â€” Intent to Action Mapping" class="w-full" loading="lazy">
      <div class="bg-neutral-50 px-3 py-1.5 text-xs text-neutral-500 text-center">Smart Routing â€” map intents to actions like knowledge base, workflows, or escalation</div>
    </div>

    <div class="bg-gradient-primary rounded-xl p-4 border border-primary-200">
      <p class="font-semibold text-primary-800 mb-2">ğŸ“‹ How to Create a Workflow:</p>
      <ol class="space-y-2 ml-4 text-primary-700 text-xs">
        <li>1. Click <strong>ğŸ§  Train</strong> â†’ <strong>ğŸ“š Responses</strong> â†’ <strong>Workflows</strong> tab</li>
        <li>2. Click <strong>+ New</strong> to create a workflow</li>
        <li>3. Give it a name (e.g., "Checkout Process")</li>
        <li>4. Choose format: <strong>Steps</strong> (simple) or <strong>Nodes</strong> (advanced)</li>
        <li>5. Add steps or nodes to build your conversation flow</li>
        <li>6. Click <strong>Save</strong> when done</li>
        <li>7. Go to <strong>ğŸ§  Train</strong> â†’ <strong>ğŸ§  Understanding</strong> â†’ <strong>Intents</strong> to assign the workflow to an intent</li>
      </ol>
    </div>

    <div class="bg-neutral-50 rounded-xl p-4 border mt-4">
      <p class="font-semibold text-neutral-800 mb-3">ğŸ“ Steps Mode (Simple Linear Flow):</p>
      <div class="space-y-2 text-xs">
        <p class="text-neutral-600">Best for simple conversations that always follow the same order.</p>
        <p class="text-neutral-700"><strong>How to use:</strong></p>
        <ol class="ml-4 space-y-1 text-neutral-600">
          <li>1. Click <strong>+ Add Step</strong></li>
          <li>2. Enter the message Rainbow should send</li>
          <li>3. Add more steps in order</li>
          <li>4. Rainbow will send each step and wait for the guest's reply before continuing</li>
        </ol>
        <p class="text-neutral-700 mt-2"><strong>Example:</strong> WiFi password workflow</p>
        <ul class="ml-4 space-y-1 text-neutral-600">
          <li>â€¢ Step 1: "Our WiFi is PelangiGuest, password: welcome123"</li>
          <li>â€¢ Step 2: "Is there anything else I can help you with?"</li>
        </ul>
      </div>
    </div>

    <div class="bg-gradient-success rounded-xl p-4 border border-success-200 mt-4">
      <p class="font-semibold text-success-800 mb-3">ğŸ¨ Nodes Mode (Advanced Branching Logic):</p>
      <div class="space-y-2 text-success-700 text-xs">
        <p>Inspired by n8n workflow automation. Allows branching, conditions, API calls, and complex flows.</p>
        <p class="font-semibold mt-2">Available Node Types:</p>
        <div class="space-y-2 ml-4">
          <div class="bg-white rounded-lg p-2 border border-success-200">
            <p class="font-semibold text-blue-700">ğŸ’¬ Message Node</p>
            <p class="text-neutral-600">Sends a text message to the guest. Use for prompts, questions, or information.</p>
          </div>
          <div class="bg-white rounded-lg p-2 border border-success-200">
            <p class="font-semibold text-purple-700">â¸ï¸ Wait Reply Node</p>
            <p class="text-neutral-600">Pauses workflow and waits for guest to respond. Saves their reply for later nodes.</p>
          </div>
          <div class="bg-white rounded-lg p-2 border border-success-200">
            <p class="font-semibold text-amber-700">ğŸ”€ Condition Node</p>
            <p class="text-neutral-600">Branches the flow based on conditions (e.g., if guest says "yes" â†’ Node A, else â†’ Node B).</p>
          </div>
          <div class="bg-white rounded-lg p-2 border border-success-200">
            <p class="font-semibold text-green-700">ğŸ“± WhatsApp Send Node</p>
            <p class="text-neutral-600">Sends a WhatsApp message to a specific phone number (e.g., notify staff when booking confirmed).</p>
          </div>
          <div class="bg-white rounded-lg p-2 border border-success-200">
            <p class="font-semibold text-orange-700">ğŸ”Œ API Call Node</p>
            <p class="text-neutral-600">Makes an API call to Pelangi Manager system (e.g., check availability, create booking, process checkout).</p>
          </div>
        </div>
        <p class="mt-2"><strong>How to build a node workflow:</strong></p>
        <ol class="ml-4 space-y-1">
          <li>1. Switch to <strong>Nodes</strong> format using the toggle</li>
          <li>2. Click node type buttons to add nodes (Message, Wait Reply, Condition, etc.)</li>
          <li>3. Configure each node by filling in the fields</li>
          <li>4. Connect nodes by setting the <strong>Next Node</strong> field</li>
          <li>5. Set the <strong>Start Node</strong> (which node runs first)</li>
          <li>6. Test using the Workflow Tester at the bottom</li>
        </ol>
      </div>
    </div>

    <div class="bg-gradient-warning rounded-xl p-4 border border-warning-200 mt-4">
      <p class="font-semibold text-warning-800 mb-2">ğŸ§ª Testing Workflows:</p>
      <div class="space-y-2 text-warning-700 text-xs">
        <p>Always test workflows before deploying to production:</p>
        <ol class="ml-4 space-y-1">
          <li>1. Scroll to <strong>Workflow Tester</strong> section at the bottom of the Workflows tab</li>
          <li>2. Select your workflow from the dropdown</li>
          <li>3. Click <strong>Begin Test</strong></li>
          <li>4. Interact with the workflow as if you're a guest</li>
          <li>5. Verify all steps/nodes work correctly and messages are clear</li>
        </ol>
        <p class="mt-2">You can also test workflows in <strong>ğŸ§ª Test â†’ ğŸ’¬ Chat Simulator</strong> for a more realistic WhatsApp-style experience.</p>
      </div>
    </div>

    <div class="bg-gradient-info rounded-xl p-4 border border-info-200 mt-4">
      <p class="font-semibold text-info-800 mb-2">ğŸ¨ Checkout Workflow (Built-in):</p>
      <div class="space-y-2 text-info-700 text-xs">
        <p>Rainbow includes a pre-built checkout workflow that guides guests through the departure process:</p>
        <ol class="ml-4 space-y-1">
          <li>1. <strong>Confirmation:</strong> Asks guest to confirm they're checking out and their capsule number</li>
          <li>2. <strong>Reminders:</strong> Reminds guest about personal belongings and returning key card</li>
          <li>3. <strong>Admin Notification:</strong> Sends WhatsApp notification to staff with guest name, capsule, and checkout time</li>
          <li>4. <strong>Farewell:</strong> Thanks the guest and requests a review</li>
        </ol>
        <p class="mt-2"><strong>To trigger checkout workflow:</strong></p>
        <ul class="ml-4 space-y-1">
          <li>â€¢ Guest says "I want to checkout", "checking out now", "saya nak checkout", "æˆ‘è¦é€€æˆ¿"</li>
          <li>â€¢ Rainbow detects <code class="bg-info-100 px-1 rounded">checkout_now</code> intent and starts the workflow</li>
          <li>â€¢ Staff receives notification automatically when guest confirms</li>
        </ul>
      </div>
    </div>

    <div class="bg-primary-50 rounded-xl p-4 border border-primary-200 mt-4">
      <p class="font-semibold text-primary-800 mb-2">ğŸ’¡ Example Use Cases:</p>
      <ul class="space-y-2 ml-4 text-primary-700 text-xs">
        <li>â€¢ <strong>Booking:</strong> Ask for dates â†’ room type â†’ number of guests â†’ send confirmation</li>
        <li>â€¢ <strong>Checkout:</strong> Confirm checkout â†’ remind about belongings â†’ notify admin â†’ thank guest (built-in)</li>
        <li>â€¢ <strong>Complaint:</strong> Ask for details â†’ collect photo â†’ escalate to staff â†’ acknowledge receipt</li>
        <li>â€¢ <strong>Survey:</strong> Ask multiple questions â†’ collect responses â†’ send thank you message</li>
        <li>â€¢ <strong>Payment:</strong> Ask for payment method â†’ process â†’ send receipt â†’ update booking status</li>
      </ul>
    </div>
  </div>
</div>

<!-- Live Chat -->
<div id="help-live-chat" class="bg-white rounded-2xl border p-6 mb-6">
  <div class="flex items-center gap-2 mb-4">
    <span class="text-2xl">ğŸ’¬</span>
    <h3 class="text-xl font-semibold text-neutral-800">Live Chat - Guest Conversations</h3>
  </div>
  <div class="space-y-4 text-sm text-neutral-700">
    <p class="leading-relaxed">
      The Live Chat interface lets you view all WhatsApp conversations between Rainbow and your guests. You can search conversations, filter by date, and reply directly to guests when needed.
    </p>

    <!-- Live Chat Screenshot -->
    <div class="rounded-xl overflow-hidden border border-neutral-200 shadow-soft">
      <img src="/public/images/help/live-chat.png" alt="Live Chat" class="w-full" loading="lazy">
      <div class="bg-neutral-50 px-3 py-1.5 text-xs text-neutral-500 text-center">Live Chat â€” view conversations, search, filter, and reply to guests</div>
    </div>

    <div class="bg-gradient-primary rounded-xl p-4 border border-primary-200">
      <p class="font-semibold text-primary-800 mb-2">ğŸ“± Accessing Live Chat:</p>
      <div class="space-y-2 text-primary-700 text-xs">
        <p>Click <strong>ğŸ’¬ Conversations</strong> â†’ <strong>ğŸ’¬ Live Chat</strong> in the navigation menu</p>
        <p class="mt-2">The interface has two parts:</p>
        <ul class="ml-4 space-y-1">
          <li>â€¢ <strong>Left sidebar:</strong> List of all conversations</li>
          <li>â€¢ <strong>Right panel:</strong> Selected conversation messages</li>
        </ul>
      </div>
    </div>

    <div class="bg-neutral-50 rounded-xl p-4 border">
      <p class="font-semibold text-neutral-800 mb-3">ğŸ” Search and Filter Features:</p>
      <div class="space-y-3 text-xs">
        <div>
          <p class="font-semibold text-neutral-700">Search Box</p>
          <p class="text-neutral-600">Type in the search box at the top to filter conversations by:</p>
          <ul class="ml-4 space-y-1 text-neutral-600 mt-1">
            <li>â€¢ Guest name (e.g., "John", "Ahmad")</li>
            <li>â€¢ Phone number (e.g., "012345", "+60123")</li>
            <li>â€¢ Message content (e.g., "booking", "checkout")</li>
          </ul>
        </div>
        <div>
          <p class="font-semibold text-neutral-700">Date Range Filter</p>
          <p class="text-neutral-600">Use the date filters to show conversations from a specific time period:</p>
          <ul class="ml-4 space-y-1 text-neutral-600 mt-1">
            <li>â€¢ <strong>From date:</strong> Start of date range</li>
            <li>â€¢ <strong>To date:</strong> End of date range</li>
            <li>â€¢ Default shows last 7 days</li>
            <li>â€¢ Click <strong>âœ•</strong> button to clear date filter and show all conversations</li>
          </ul>
        </div>
        <div>
          <p class="font-semibold text-neutral-700">Quick Filters</p>
          <p class="text-neutral-600">Click filter chips to quickly filter:</p>
          <ul class="ml-4 space-y-1 text-neutral-600 mt-1">
            <li>â€¢ <strong>All:</strong> Show all conversations</li>
            <li>â€¢ <strong>Unread:</strong> Show only unread messages</li>
            <li>â€¢ <strong>Favourites:</strong> Show starred/favourite conversations</li>
            <li>â€¢ <strong>Groups:</strong> Show group chats only</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="bg-gradient-success rounded-xl p-4 border border-success-200">
      <p class="font-semibold text-success-800 mb-2">ğŸ’¬ Replying to Guests:</p>
      <div class="space-y-2 text-success-700 text-xs">
        <p>You can manually reply to guests when Rainbow needs human assistance:</p>
        <ol class="ml-4 space-y-1">
          <li>1. Click a conversation in the left sidebar to open it</li>
          <li>2. Read the conversation history in the right panel</li>
          <li>3. Type your message in the input box at the bottom</li>
          <li>4. Press <strong>Enter</strong> or click the send button</li>
          <li>5. Your message will be sent to the guest via WhatsApp</li>
        </ol>
        <p class="mt-2"><strong>When to reply manually:</strong></p>
        <ul class="ml-4 space-y-1">
          <li>â€¢ Guest asks a question Rainbow can't answer</li>
          <li>â€¢ Complex booking or special request</li>
          <li>â€¢ Guest escalated to human support</li>
          <li>â€¢ Follow-up after checkout or complaint</li>
        </ul>
      </div>
    </div>

    <div class="bg-gradient-warning rounded-xl p-4 border border-warning-200">
      <p class="font-semibold text-warning-800 mb-2">âš™ï¸ Additional Features:</p>
      <ul class="space-y-1 ml-4 text-warning-700 text-xs">
        <li>â€¢ <strong>Mark as read:</strong> Click menu (â‹®) â†’ "Mark all as read" to clear unread badges</li>
        <li>â€¢ <strong>Star conversations:</strong> Click star icon to mark important conversations as favourites</li>
        <li>â€¢ <strong>Instance filter:</strong> If you have multiple WhatsApp numbers, filter by instance</li>
        <li>â€¢ <strong>Connection status:</strong> Green badge at top shows WhatsApp connection status</li>
      </ul>
    </div>

    <div class="bg-primary-50 rounded-xl p-4 border border-primary-200 mt-4">
      <p class="font-semibold text-primary-800 mb-2">ğŸ’¡ Pro Tips:</p>
      <ul class="space-y-1 ml-4 text-primary-700 text-xs">
        <li>â€¢ Use date filter to review conversations from specific periods (e.g., last weekend)</li>
        <li>â€¢ Search for "checkout" or "booking" to quickly find relevant conversations</li>
        <li>â€¢ Star important conversations for easy access later</li>
        <li>â€¢ Check Live Chat regularly to catch any escalations or unresolved issues</li>
        <li>â€¢ Use manual replies sparingly - add common issues to Knowledge Base instead</li>
      </ul>
    </div>
  </div>
</div>

<!-- Troubleshooting -->
<div id="help-troubleshooting" class="bg-white rounded-2xl border p-6 mb-6">
  <div class="flex items-center gap-2 mb-4">
    <span class="text-2xl">ğŸ”§</span>
    <h3 class="text-xl font-semibold text-neutral-800">Troubleshooting</h3>
  </div>
  <div class="space-y-4 text-sm">
    <div class="space-y-3">
      <!-- Issue 1 -->
      <div class="bg-gradient-danger rounded-xl p-4 border border-danger-200">
        <p class="font-semibold text-danger-800 mb-2">âŒ WhatsApp Not Connecting</p>
        <ul class="space-y-1 ml-4 text-danger-700 text-xs">
          <li>â€¢ <strong>QR code expired:</strong> Click "Reconnect" to generate a new QR code</li>
          <li>â€¢ <strong>Phone offline:</strong> Ensure your phone has internet connection</li>
          <li>â€¢ <strong>Wrong number:</strong> Verify the phone number matches your WhatsApp account</li>
          <li>â€¢ <strong>Already linked:</strong> Unlink from other devices first (max 4 linked devices)</li>
          <li>â€¢ <strong>Check connection status:</strong> Green badge in Live Chat or Dashboard shows connection status</li>
        </ul>
      </div>

      <!-- Issue 2 -->
      <div class="bg-gradient-danger rounded-xl p-4 border border-danger-200">
        <p class="font-semibold text-danger-800 mb-2">âŒ Bot Not Responding</p>
        <ul class="space-y-1 ml-4 text-danger-700 text-xs">
          <li>â€¢ <strong>Check WhatsApp Status:</strong> Click <strong>ğŸ“Š Monitor</strong> â†’ <strong>ğŸ  Dashboard</strong> - WhatsApp should show Connected status</li>
          <li>â€¢ <strong>AI Unavailable:</strong> Click <strong>ğŸ“Š Monitor</strong> â†’ <strong>âš™ï¸ Settings</strong> â†’ <strong>ğŸ¤– AI Models</strong> - ensure at least one AI model is enabled</li>
          <li>â€¢ <strong>Test in simulator:</strong> Use <strong>ğŸ§ª Test â†’ ğŸ’¬ Chat Simulator</strong> to test if bot responds there</li>
          <li>â€¢ <strong>Check intent classification:</strong> Message may not match any intents - add keywords/examples</li>
        </ul>
      </div>

      <!-- Issue 3 -->
      <div class="bg-gradient-danger rounded-xl p-4 border border-danger-200">
        <p class="font-semibold text-danger-800 mb-2">âŒ Wrong Intent Detected</p>
        <ul class="space-y-1 ml-4 text-danger-700 text-xs">
          <li>â€¢ <strong>Test message:</strong> Use <strong>ğŸ§ª Test â†’ ğŸ’¬ Chat Simulator</strong> to see which intent is detected</li>
          <li>â€¢ <strong>Add keywords:</strong> Go to <strong>ğŸ§  Train â†’ ğŸ§  Understanding</strong>, use Quick Add to add the message as a keyword or example for the correct intent</li>
          <li>â€¢ <strong>Check tier matching:</strong> If T4 (LLM) is always matching, add more T2 keywords or T3 examples for better performance</li>
          <li>â€¢ <strong>Review in Staff Review:</strong> Use <strong>ğŸ§ª Test â†’ ğŸ‘¥ Staff Review</strong> to validate and improve classifications</li>
        </ul>
      </div>

      <!-- Issue 4 -->
      <div class="bg-gradient-danger rounded-xl p-4 border border-danger-200">
        <p class="font-semibold text-danger-800 mb-2">âŒ Workflow Not Starting</p>
        <ul class="space-y-1 ml-4 text-danger-700 text-xs">
          <li>â€¢ <strong>Check intent routing:</strong> Go to <strong>ğŸ§  Train â†’ ğŸ§  Understanding â†’ Intents</strong> and verify the intent is set to trigger the workflow</li>
          <li>â€¢ <strong>Test workflow:</strong> Use Workflow Tester in <strong>ğŸ§  Train â†’ ğŸ“š Responses â†’ Workflows</strong> to test workflow logic</li>
          <li>â€¢ <strong>Check start node:</strong> For node-based workflows, ensure the Start Node is set correctly</li>
          <li>â€¢ <strong>Verify node connections:</strong> Make sure all nodes have valid Next Node values</li>
        </ul>
      </div>

      <!-- Issue 5 -->
      <div class="bg-gradient-danger rounded-xl p-4 border border-danger-200">
        <p class="font-semibold text-danger-800 mb-2">âŒ Can't Find Conversation in Live Chat</p>
        <ul class="space-y-1 ml-4 text-danger-700 text-xs">
          <li>â€¢ <strong>Check date filter:</strong> Live Chat defaults to last 7 days - clear date filter to see all conversations</li>
          <li>â€¢ <strong>Use search:</strong> Type guest name, phone number, or message keywords in search box</li>
          <li>â€¢ <strong>Check instance filter:</strong> If you have multiple WhatsApp numbers, make sure "All Instances" is selected</li>
          <li>â€¢ <strong>Check quick filters:</strong> Make sure "All" is selected, not "Unread" or "Favourites"</li>
        </ul>
      </div>
    </div>

    <div class="bg-primary-50 rounded-xl p-4 border border-primary-200 mt-4">
      <p class="font-semibold text-primary-800 mb-2">ğŸ’¡ Need More Help?</p>
      <p class="text-primary-700 text-xs">
        <strong>Testing tools:</strong> Use <strong>ğŸ§ª Test â†’ ğŸ’¬ Chat Simulator</strong> to test responses and identify issues before they affect real guests.
        <br><br>
        <strong>Monitoring:</strong> Check <strong>ğŸ“Š Monitor â†’ ğŸ  Dashboard</strong> for real-time system status and connection diagnostics.
        <br><br>
        <strong>Support:</strong> For technical issues beyond these solutions, contact your system administrator.
      </p>
    </div>
  </div>
</div>

<!-- Quick Tips -->
<div class="bg-gradient-success rounded-2xl border border-success-200 p-6">
  <div class="flex items-center gap-2 mb-4">
    <span class="text-2xl">âœ¨</span>
    <h3 class="text-xl font-semibold text-success-800">Quick Tips for Success</h3>
  </div>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-xs">
    <div class="space-y-2">
      <div class="flex items-start gap-2">
        <span class="flex-shrink-0 text-success-600">âœ“</span>
        <p class="text-success-700"><strong>Test Before Deploy:</strong> Always use <strong>ğŸ§ª Test â†’ ğŸ’¬ Chat Simulator</strong> to test changes before they go live</p>
      </div>
      <div class="flex items-start gap-2">
        <span class="flex-shrink-0 text-success-600">âœ“</span>
        <p class="text-success-700"><strong>Use Quick Add:</strong> Found a wrong classification? Use Quick Add to fix it in seconds</p>
      </div>
      <div class="flex items-start gap-2">
        <span class="flex-shrink-0 text-success-600">âœ“</span>
        <p class="text-success-700"><strong>Monitor Live Chat:</strong> Check <strong>ğŸ’¬ Conversations â†’ ğŸ’¬ Live Chat</strong> regularly to catch issues</p>
      </div>
      <div class="flex items-start gap-2">
        <span class="flex-shrink-0 text-success-600">âœ“</span>
        <p class="text-success-700"><strong>Add Keywords First:</strong> T2 keywords are fastest - add these before T3 examples</p>
      </div>
    </div>
    <div class="space-y-2">
      <div class="flex items-start gap-2">
        <span class="flex-shrink-0 text-success-600">âœ“</span>
        <p class="text-success-700"><strong>Update Knowledge Base:</strong> Keep information current and accurate for best AI responses</p>
      </div>
      <div class="flex items-start gap-2">
        <span class="flex-shrink-0 text-success-600">âœ“</span>
        <p class="text-success-700"><strong>Test Workflows:</strong> Use Workflow Tester before deploying multi-step conversations</p>
      </div>
      <div class="flex items-start gap-2">
        <span class="flex-shrink-0 text-success-600">âœ“</span>
        <p class="text-success-700"><strong>Review Classifications:</strong> Use <strong>ğŸ§ª Test â†’ ğŸ‘¥ Staff Review</strong> to validate AI predictions</p>
      </div>
      <div class="flex items-start gap-2">
        <span class="flex-shrink-0 text-success-600">âœ“</span>
        <p class="text-success-700"><strong>Check Token Usage:</strong> Monitor AI costs in Chat Simulator metadata section</p>
      </div>
    </div>
  </div>
</div>

