{
  "runId": "digiman-cli-1772242026715",
  "startTime": "2026-02-28T01:24:32.521Z",
  "endTime": "2026-02-28T01:27:06.715Z",
  "duration": 154194,
  "options": {
    "url": "http://localhost:5000",
    "modules": [],
    "types": []
  },
  "summary": {
    "total": 47,
    "passed": 47,
    "failed": 0,
    "successRate": 100
  },
  "results": [
    {
      "id": "SM-001",
      "name": "Health endpoint",
      "module": "smoke",
      "type": "smoke",
      "description": "GET /api/health returns status:ok",
      "status": "passed",
      "duration": 1001,
      "details": "ok · uptime: 101s · storage: database",
      "error": null,
      "suggestions": []
    },
    {
      "id": "SM-002",
      "name": "Database connectivity",
      "module": "smoke",
      "type": "smoke",
      "description": "DB reachable via health endpoint",
      "status": "passed",
      "duration": 1040,
      "details": "Storage: database · units: 32",
      "error": null,
      "suggestions": []
    },
    {
      "id": "SM-003",
      "name": "Business config (no auth)",
      "module": "smoke",
      "type": "smoke",
      "description": "GET /api/business-config accessible without auth",
      "status": "passed",
      "duration": 2,
      "details": "Keys: name, shortName, tagline, accommodationType, address",
      "error": null,
      "suggestions": []
    },
    {
      "id": "SM-004",
      "name": "API response latency",
      "module": "smoke",
      "type": "smoke",
      "description": "Server responds < 3000ms",
      "status": "passed",
      "duration": 1004,
      "details": "1004ms ✓",
      "error": null,
      "suggestions": []
    },
    {
      "id": "SM-005",
      "name": "Tests runner endpoint",
      "module": "smoke",
      "type": "smoke",
      "description": "GET /api/tests/health responds",
      "status": "passed",
      "duration": 249,
      "details": "Backend tests healthy · units: 32",
      "error": null,
      "suggestions": []
    },
    {
      "id": "AU-001",
      "name": "Login with valid credentials",
      "module": "auth",
      "type": "unit",
      "description": "Login returns token + user",
      "status": "passed",
      "duration": 576,
      "details": "Token issued · role: admin",
      "error": null,
      "suggestions": []
    },
    {
      "id": "AU-002",
      "name": "Login with wrong password",
      "module": "auth",
      "type": "unit",
      "description": "Wrong credentials return 401",
      "status": "passed",
      "duration": 499,
      "details": "Correctly rejected: Invalid credentials",
      "error": null,
      "suggestions": []
    },
    {
      "id": "AU-003",
      "name": "Login with missing fields",
      "module": "auth",
      "type": "unit",
      "description": "Missing password returns 400",
      "status": "passed",
      "duration": 4,
      "details": "Validation rejects: Please fix the following issues:",
      "error": null,
      "suggestions": []
    },
    {
      "id": "AU-004",
      "name": "Protected route without token",
      "module": "auth",
      "type": "unit",
      "description": "GET /auth/me without token returns 401",
      "status": "passed",
      "duration": 2,
      "details": "Auth guard returns 401 ✓",
      "error": null,
      "suggestions": []
    },
    {
      "id": "AU-005",
      "name": "Get /auth/me with valid token",
      "module": "auth",
      "type": "unit",
      "description": "Valid token returns user info",
      "status": "passed",
      "duration": 546,
      "details": "User: admin · role: admin",
      "error": null,
      "suggestions": []
    },
    {
      "id": "AU-006",
      "name": "Invalid token rejected",
      "module": "auth",
      "type": "unit",
      "description": "Fabricated token returns 401",
      "status": "passed",
      "duration": 244,
      "details": "Invalid token correctly rejected",
      "error": null,
      "suggestions": []
    },
    {
      "id": "AU-007",
      "name": "Logout invalidates session",
      "module": "auth",
      "type": "unit",
      "description": "After logout, token returns 401",
      "status": "passed",
      "duration": 1577,
      "details": "Session invalidated after logout ✓",
      "error": null,
      "suggestions": []
    },
    {
      "id": "GU-001",
      "name": "List guests (authenticated)",
      "module": "guests",
      "type": "unit",
      "description": "GET /guests returns array",
      "status": "passed",
      "duration": 32044,
      "details": "50 guests",
      "error": null,
      "suggestions": []
    },
    {
      "id": "GU-002",
      "name": "List guests (unauthenticated)",
      "module": "guests",
      "type": "unit",
      "description": "GET /guests without token returns 401",
      "status": "passed",
      "duration": 4,
      "details": "Auth guard enforced ✓",
      "error": null,
      "suggestions": []
    },
    {
      "id": "GU-003",
      "name": "Checked-in guests endpoint",
      "module": "guests",
      "type": "unit",
      "description": "GET /guests/checked-in returns occupants",
      "status": "passed",
      "duration": 258,
      "details": "19 checked-in guests",
      "error": null,
      "suggestions": []
    },
    {
      "id": "GU-004",
      "name": "Create guest → verify → cleanup",
      "module": "guests",
      "type": "unit",
      "description": "POST guest lifecycle",
      "status": "passed",
      "duration": 3318,
      "details": "Created b9d47769... → verified → deleted ✓",
      "error": null,
      "suggestions": []
    },
    {
      "id": "GU-005",
      "name": "Guest creation validation",
      "module": "guests",
      "type": "unit",
      "description": "Missing name returns 400",
      "status": "passed",
      "duration": 532,
      "details": "Missing name rejected: Please fix the following issues:",
      "error": null,
      "suggestions": []
    },
    {
      "id": "GU-006",
      "name": "Update guest (PATCH)",
      "module": "guests",
      "type": "unit",
      "description": "PATCH /guests/:id updates a field",
      "status": "passed",
      "duration": 32682,
      "details": "Updated ecec21bf... and restored ✓",
      "error": null,
      "suggestions": []
    },
    {
      "id": "GU-007",
      "name": "Guest history endpoint",
      "module": "guests",
      "type": "unit",
      "description": "GET /guests/history returns checked-out guests",
      "status": "passed",
      "duration": 257,
      "details": "20 historical guests",
      "error": null,
      "suggestions": []
    },
    {
      "id": "UN-001",
      "name": "List all units",
      "module": "units",
      "type": "unit",
      "description": "GET /units returns array",
      "status": "passed",
      "duration": 271,
      "details": "32 units",
      "error": null,
      "suggestions": []
    },
    {
      "id": "UN-002",
      "name": "Available units filter",
      "module": "units",
      "type": "unit",
      "description": "All returned units have isAvailable=true",
      "status": "passed",
      "duration": 825,
      "details": "11 available units ✓",
      "error": null,
      "suggestions": []
    },
    {
      "id": "UN-003",
      "name": "Cleaning status filter",
      "module": "units",
      "type": "unit",
      "description": "Cleaning status filters return accurate results",
      "status": "passed",
      "duration": 528,
      "details": "Cleaned: 32 · Dirty: 0",
      "error": null,
      "suggestions": []
    },
    {
      "id": "UN-004",
      "name": "Units needing attention",
      "module": "units",
      "type": "unit",
      "description": "GET /units/needs-attention returns results",
      "status": "passed",
      "duration": 270,
      "details": "0 units need attention",
      "error": null,
      "suggestions": []
    },
    {
      "id": "UN-005",
      "name": "Mark unit as cleaned",
      "module": "units",
      "type": "unit",
      "description": "POST /units/:number/mark-cleaned works",
      "status": "passed",
      "duration": 491,
      "details": "Unit C2 marked cleaned (200) ✓",
      "error": null,
      "suggestions": []
    },
    {
      "id": "DA-001",
      "name": "Occupancy stats",
      "module": "dashboard",
      "type": "unit",
      "description": "GET /occupancy returns metrics",
      "status": "passed",
      "duration": 976,
      "details": "{\"total\":30,\"occupied\":19,\"available\":11,\"occupancyRate\":63}",
      "error": null,
      "suggestions": []
    },
    {
      "id": "DA-002",
      "name": "Dashboard data endpoint",
      "module": "dashboard",
      "type": "unit",
      "description": "GET /dashboard returns combined data",
      "status": "passed",
      "duration": 1795,
      "details": "Keys: occupancy, guests, activeTokens, unreadNotifications, timestamp",
      "error": null,
      "suggestions": []
    },
    {
      "id": "DA-003",
      "name": "Monthly occupancy calendar",
      "module": "dashboard",
      "type": "unit",
      "description": "GET /calendar/occupancy/:year/:month works",
      "status": "passed",
      "duration": 1085,
      "details": "Calendar 2026/2 returned",
      "error": null,
      "suggestions": []
    },
    {
      "id": "SE-001",
      "name": "Get settings",
      "module": "settings",
      "type": "unit",
      "description": "GET /settings returns config",
      "status": "passed",
      "duration": 771,
      "details": "69 keys",
      "error": null,
      "suggestions": []
    },
    {
      "id": "SE-002",
      "name": "Setup status endpoint",
      "module": "settings",
      "type": "unit",
      "description": "GET /settings/setup-status works",
      "status": "passed",
      "duration": 757,
      "details": "{\"completed\":true}",
      "error": null,
      "suggestions": []
    },
    {
      "id": "FI-001",
      "name": "List expenses",
      "module": "finance",
      "type": "unit",
      "description": "GET /expenses returns array",
      "status": "passed",
      "duration": 6006,
      "details": "4 expenses",
      "error": null,
      "suggestions": []
    },
    {
      "id": "FI-002",
      "name": "Expense lifecycle (create → delete)",
      "module": "finance",
      "type": "unit",
      "description": "POST → DELETE expense",
      "status": "passed",
      "duration": 2348,
      "details": "Created 7bbba2cb... → deleted ✓",
      "error": null,
      "suggestions": []
    },
    {
      "id": "FI-003",
      "name": "Expense invalid category",
      "module": "finance",
      "type": "unit",
      "description": "Invalid category returns 400",
      "status": "passed",
      "duration": 517,
      "details": "Category validation working ✓",
      "error": null,
      "suggestions": []
    },
    {
      "id": "PR-001",
      "name": "List all problems",
      "module": "problems",
      "type": "unit",
      "description": "GET /problems returns array",
      "status": "passed",
      "duration": 795,
      "details": "12 problems",
      "error": null,
      "suggestions": []
    },
    {
      "id": "PR-002",
      "name": "Active problems filter",
      "module": "problems",
      "type": "unit",
      "description": "GET /problems/active returns only unresolved",
      "status": "passed",
      "duration": 764,
      "details": "8 active problems ✓",
      "error": null,
      "suggestions": []
    },
    {
      "id": "PR-003",
      "name": "Problem lifecycle (create → resolve → delete)",
      "module": "problems",
      "type": "unit",
      "description": "Full problem workflow",
      "status": "passed",
      "duration": 2496,
      "details": "Created → resolved → deleted (0e4b0ab7...) ✓",
      "error": null,
      "suggestions": []
    },
    {
      "id": "IN-001",
      "name": "Full check-in / check-out workflow",
      "module": "integration",
      "type": "integration",
      "description": "Unit → check-in → verify → checkout → verify history → cleanup",
      "status": "passed",
      "duration": 4274,
      "details": "J4 → in → checkout → in history ✓ → deleted",
      "error": null,
      "suggestions": []
    },
    {
      "id": "IN-002",
      "name": "Expense CRUD lifecycle",
      "module": "integration",
      "type": "integration",
      "description": "Create → list → update → delete",
      "status": "passed",
      "duration": 9627,
      "details": "CRUD lifecycle complete (b0e4b73d...) ✓",
      "error": null,
      "suggestions": []
    },
    {
      "id": "IN-003",
      "name": "Problem report → resolve lifecycle",
      "module": "integration",
      "type": "integration",
      "description": "Create → in active → resolve → not in active",
      "status": "passed",
      "duration": 4024,
      "details": "Created → active → resolved → removed → deleted ✓",
      "error": null,
      "suggestions": []
    },
    {
      "id": "IN-004",
      "name": "Unit cleaning cycle",
      "module": "integration",
      "type": "integration",
      "description": "Check-in → checkout → dirty → mark cleaned → verified",
      "status": "passed",
      "duration": 4007,
      "details": "R1: dirty ✓ → cleaned ✓",
      "error": null,
      "suggestions": []
    },
    {
      "id": "ED-001",
      "name": "Invalid UUID in guest path",
      "module": "edge",
      "type": "edge",
      "description": "GET /guests/not-a-uuid returns 400 or 404, not 500",
      "status": "passed",
      "duration": 751,
      "details": "Returns 404 (expected 400/404)",
      "error": null,
      "suggestions": []
    },
    {
      "id": "ED-002",
      "name": "XSS payload in guest name",
      "module": "edge",
      "type": "edge",
      "description": "Script tag in name handled safely",
      "status": "passed",
      "duration": 511,
      "details": "XSS rejected (400) ✓",
      "error": null,
      "suggestions": []
    },
    {
      "id": "ED-003",
      "name": "SQL injection in search parameter",
      "module": "edge",
      "type": "edge",
      "description": "DROP TABLE in search param handled safely",
      "status": "passed",
      "duration": 30752,
      "details": "Returns 200 safely (Drizzle parameterized queries ✓)",
      "error": null,
      "suggestions": []
    },
    {
      "id": "ED-004",
      "name": "Empty body POST to guests",
      "module": "edge",
      "type": "edge",
      "description": "{} returns 400 not 500",
      "status": "passed",
      "duration": 1579,
      "details": "Empty body returns 400 (expected 400)",
      "error": null,
      "suggestions": []
    },
    {
      "id": "ED-005",
      "name": "Non-existent API route",
      "module": "edge",
      "type": "edge",
      "description": "Unknown route returns 404 not 500",
      "status": "passed",
      "duration": 3,
      "details": "Returns 404",
      "error": null,
      "suggestions": []
    },
    {
      "id": "ED-006",
      "name": "Extremely long guest name (1000 chars)",
      "module": "edge",
      "type": "edge",
      "description": "Long name returns 400 or is safely stored",
      "status": "passed",
      "duration": 1052,
      "details": "1000-char name rejected (400) ✓",
      "error": null,
      "suggestions": []
    },
    {
      "id": "ED-007",
      "name": "Invalid date format",
      "module": "edge",
      "type": "edge",
      "description": "'not-a-date' in expectedCheckoutDate returns 400 not 500",
      "status": "passed",
      "duration": 535,
      "details": "Invalid date rejected (400) ✓",
      "error": null,
      "suggestions": []
    },
    {
      "id": "ED-008",
      "name": "Negative expense amount",
      "module": "edge",
      "type": "edge",
      "description": "Negative amount returns 400 not 500",
      "status": "passed",
      "duration": 538,
      "details": "Negative amount rejected (400) ✓",
      "error": null,
      "suggestions": []
    }
  ]
}